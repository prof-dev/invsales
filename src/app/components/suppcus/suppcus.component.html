<div id="map" class="map"></div>
<mat-expansion-panel>
    <mat-expansion-panel-header>
        {{location}} انقر على الخريطه
    </mat-expansion-panel-header>
    <mat-card>
        <br>
        <button mat-raised-button color="primary" (click)="setType('c')">إدخال عميل</button>&nbsp;
        <button mat-raised-button color="primary" (click)="setType('s')">إدخال مورد</button>
        <br>
        <h1 mat-dialog-title> إدخال بيانات {{formtype}}</h1>

        <div mat-dialog-content>

            <mat-form-field>
                <input matInput required placeholder="الإسم " [(ngModel)]="form.fullname">
            </mat-form-field>
            <mat-form-field>
                <input matInput required placeholder=" الرصيد المبدئي" [(ngModel)]="form.balance">
            </mat-form-field>
            <mat-form-field *ngIf="form.type=='c'">
                <input matInput required placeholder=" فرع العميل" [(ngModel)]="form.branch">
            </mat-form-field>
            <mat-form-field>
                <input matInput required placeholder=" موبايل" [(ngModel)]="form.data.phone">
            </mat-form-field>
            <mat-form-field>
                <input matInput required placeholder=" موبايل 2" [(ngModel)]="form.data.phone2">
            </mat-form-field>
            <mat-form-field>
                <input matInput required placeholder=" بريد إلكتروني" [(ngModel)]="form.data.email">
            </mat-form-field>
            <mat-form-field>
                <input matInput required placeholder=" رقم الواتساب" [(ngModel)]="form.data.whatsapp">
            </mat-form-field>
            <mat-form-field>
                <input matInput required placeholder="العنوان على الخريطة" [(ngModel)]="form.data.location" [value]="location">
            </mat-form-field>
            <br>
            <!-- capture the location from the map save it to form.data.location -->



        </div>

        <div mat-dialog-actions>
            <button mat-raised-button (click)="save(form)" color='primary'>حفظ</button>
            <button mat-raised-button (click)="onNoClick()" color='warn'>تراجع</button>


        </div>
        <div *ngIf="operation != 0">


            <h2>{{formtype}}</h2>

            <table class="responsive">
                <tr>
                    <th>الرقم</th>
                    <th>الإسم</th>
                    <th>رقم الهاتف</th>
                    <th>الموبايل</th>
                    <th>الواتساب</th>
                    <th>الايميل</th>
                    <th *ngIf="form.type=='c'">الفرع</th>
                    <th>الرصيد</th>
                    <th>تعديل</th>
                </tr>
                <tr *ngFor="let row of suppcus  ">
                    <td>{{row.id}}</td>
                    <td>{{row.fullname}}</td>
                    <td>{{row.data.phone}}</td>
                    <td>{{row.data.phone2}}</td>
                    <td>{{row.data.whatsapp}}</td>
                    <td>{{row.data.email}}</td>
                    <td *ngIf="form.type=='c'">{{row.branch}}</td>
                    <td>{{row.balance}}</td>
                    <td>
                        <button mat-raised-button color="primary" (click)="modify(row)">تعديل</button>
                    </td>


                </tr>
            </table>


        </div>


    </mat-card>
</mat-expansion-panel>